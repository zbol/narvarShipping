!function(){"use strict";var e={},t={settings:e,loadAJAX:function(e){function t(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=new Date(e);a.setDate(a.getUTCDate());var s=""+a.getUTCFullYear(),n=""+a.getUTCMonth(),r=""+a.getUTCDate();return 1==r.length&&(r="0"+r),i[a.getUTCDay()]+", "+t[n]+" "+r+", "+s}function i(){var e=new Date,t=""+e.getUTCFullYear(),i=""+(e.getUTCMonth()+1);1==i.length&&(i="0"+i);var a=""+e.getUTCDate();1==a.length&&(a="0"+a);var s=""+e.getUTCHours();1==s.length&&(s="0"+s);var n=""+e.getUTCMinutes();1==n.length&&(n="0"+n);var r=""+e.getUTCSeconds();return 1==r.length&&(r="0"+r),t+"-"+i+"-"+a+"T"+s+":"+n+":"+r+"Z"}var a=i(),s=e,n=$("#shipping_method option:selected").val(),r={async:!0,crossDomain:!0,url:"https://www.sunglasshut.com/narvar/api/shipping",method:"POST",contentType:"application/json",headers:{"cache-control":"no-cache"},data:'{ "retailerName":"sunglasshut", "OAuthToken":"kjU8LDCJgjhmavEL",\r\n   "source":"test",\r\n  "shipping":[  \r\n  {  \r\n  "orderDate":"'+a+'",\r\n  "carrier":"",\r\n  "serviceType":"",\r\n "ozip":"38118",\r\n "dzip":"'+s+'",\r\n "fulfillmentDays":0\r\n  }\r\n  ]\r\n}\r\n'};$.ajax(r).done(function(e){if("OK"===e.status.code){var i=t(e.shipResponse.shippingInfos[0].shippingDetail.detail[0].deliveryDateMax),a=(t(e.shipResponse.shippingInfos[0].shippingDetail.detail[0].deliveryDateMin),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[1].deliveryDateMax)),s=(t(e.shipResponse.shippingInfos[0].shippingDetail.detail[1].deliveryDateMin),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[2].deliveryDateMax),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[2].deliveryDateMin),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[3].deliveryDateMax)),r=(t(e.shipResponse.shippingInfos[0].shippingDetail.detail[3].deliveryDateMin),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[4].deliveryDateMax));t(e.shipResponse.shippingInfos[0].shippingDetail.detail[4].deliveryDateMin);switch($(".val-10752 .ship-estimated").html(s).addClass("ship-has-estimate"),$(".val-10753 .ship-estimated").html(a).addClass("ship-has-estimate"),$(".val-10751 .ship-estimated").html(i).addClass("ship-has-estimate"),$(".val-10755 .ship-estimated").html(r).addClass("ship-has-estimate"),n){case"10753":$(".estimate-header .red").text(a);break;case"10752":$(".estimate-header .red").text(s);break;case"10751":$(".estimate-header .red").text(i);break;case"10755":$(".estimate-header .red").text(r);break;case"10754":$(".estimate-header .red").text("No Estimated Delivery on APO/FPO Orders")}}else $(".estimate-header .red").text("Not available at this time")}).fail(function(){$(".estimate-header .red").text("Not available at this time")})},getShippingText:function(e){var i="",a="",s=[{value:"10753",method:"2-Day Shipping",subtext:"<strong>FREE</strong> 2-Day Shipping",othertext:""},{value:"10751",method:"Standard Shipping",subtext:"<strong>FREE</strong> Standard Shipping",othertext:""},{value:"10752",method:"Next-Day Shipping",subtext:"<span class='ship-amount'>$17.95</span> Next-Day Shipping",othertext:""},{value:"10755",method:"USPS PO BOX",subtext:"<strong>FREE</strong> USPS PO BOX Only ",othertext:""},{value:"10754",method:"APO/FPO",subtext:"<strong>FREE</strong> APO/FPO ",othertext:""}];for(t=0;t<s.length;t++){var n=s[t],r=n.value,p=n.subtext,h=n.othertext;r==e&&(i=p,a=h)}return[i,a]},changeShipDropDown:function(){var e=$("#shipping_method option:selected").index(),t="Enter Zip Code Above",i=this;$("#shipping_method option").each(function(t,a){var s=($(this).text(),$(this).val()),n=i.getShippingText(s),r=n[0],p=(n[1],"redesignIcons-radio");$("<div/>").addClass("sgh-ship-radio custom-check val-"+s).prepend($('<label for="'+s+'"><span class="icon '+p+'"></span><span class="red ship-estimated"></span><span class="ship-text">'+r+"</span></label>").attr("value",s).prepend($('<input type="radio" name="shipping" id="'+s+'" />').attr("checked",t==e).click(function(){var e=$(this);e.prev().prop("checked");$("input:radio[name="+$(this).attr("name")+"]").parent().find(".icon.redesignIcons-radio-checked").removeClass("redesignIcons-radio-checked").addClass("redesignIcons-radio"),$(this).parent().find(".icon").removeClass("redesignIcons-radio").addClass("redesignIcons-radio-checked"),$("#shipping_method").val(s),$("#shipping_method_with_signature").val($("#shipping_method").val()),i.loadAJAX()}))).appendTo(".shipping-method")});var a=$("#shipping_method .Next").text();if(a.indexOf("FREE")!==-1&&$(".sgh-ship-radio.val-10752").find(".ship-amount").html("<strong>FREE</strong>"),$(".val-10754").insertAfter($(".val-10751")),$(".val-10755").insertAfter($(".val-10751")),$("<div/>").addClass("sgh-ship-estimate").prepend($("<p/>").addClass("estimate-header").html('Estimated Delivery: <br/><span class="red">'+t+"</span>")).insertAfter("#checkout_cart .shipping-method h1"),$("#zipCode").change(function(){var e=$(this).val();i.loadAJAX(e)}),$("#zipCode").val()){var s=$("#zipCode").val();i.loadAJAX(s)}if($("#selectShipmentAddresses").length){var s=$('#selectShipmentAddresses .entry:visible input[name$="_zip"]').val();$("#shipmentAddress").change(function(){s=$('#selectShipmentAddresses .entry:visible input[name$="_zip"]').val(),setTimeout(function(){i.loadAJAX(s)},300)}),i.loadAJAX(s)}},init:function(){return this.changeShipDropDown(),this}};window.narvarAPI=t}(),$(function(){$("#SignatureContainer:visible").length||($("body").addClass("exp-narvar-shipping"),narvarAPI.init())});