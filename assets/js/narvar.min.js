!function(){"use strict";var e={},t={settings:e,loadAJAX:function(e){function t(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=new Date(e);s.setDate(s.getUTCDate());var a=""+s.getUTCFullYear(),n=""+s.getUTCMonth(),o=""+s.getUTCDate();return 1==o.length&&(o="0"+o),i[s.getUTCDay()]+", "+t[n]+" "+o+", "+a}function i(){var e=new Date,t=""+e.getUTCFullYear(),i=""+(e.getUTCMonth()+1);1==i.length&&(i="0"+i);var s=""+e.getUTCDate();1==s.length&&(s="0"+s);var a=""+e.getUTCHours();1==a.length&&(a="0"+a);var n=""+e.getUTCMinutes();1==n.length&&(n="0"+n);var o=""+e.getUTCSeconds();return 1==o.length&&(o="0"+o),t+"-"+i+"-"+s+"T"+a+":"+n+":"+o+"Z"}var s=i(),a=e,n=$("#singleShipmentShippingMode option:selected").val(),o={async:!0,crossDomain:!0,url:"https://www.sunglasshut.com/narvar/api/shipping",method:"POST",contentType:"application/json",headers:{"cache-control":"no-cache"},data:'{ "retailerName":"sunglasshut", "OAuthToken":"kjU8LDCJgjhmavEL",\r\n   "source":"test",\r\n  "shipping":[  \r\n  {  \r\n  "orderDate":"'+s+'",\r\n  "carrier":"",\r\n  "serviceType":"",\r\n "ozip":"38118",\r\n "dzip":"'+a+'",\r\n "fulfillmentDays":0\r\n  }\r\n  ]\r\n}\r\n'};$.ajax(o).done(function(e){if("OK"===e.status.code){var i=t(e.shipResponse.shippingInfos[0].shippingDetail.detail[0].deliveryDateMax),s=(t(e.shipResponse.shippingInfos[0].shippingDetail.detail[0].deliveryDateMin),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[1].deliveryDateMax)),a=(t(e.shipResponse.shippingInfos[0].shippingDetail.detail[1].deliveryDateMin),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[2].deliveryDateMax),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[2].deliveryDateMin),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[3].deliveryDateMax)),o=(t(e.shipResponse.shippingInfos[0].shippingDetail.detail[3].deliveryDateMin),t(e.shipResponse.shippingInfos[0].shippingDetail.detail[4].deliveryDateMax));t(e.shipResponse.shippingInfos[0].shippingDetail.detail[4].deliveryDateMin);switch($(".val-10752 .ship-estimated").text(a+" - "),$(".val-10753 .ship-estimated").text(s+" - "),$(".val-10751 .ship-estimated").text(i+" - "),$(".val-10755 .ship-estimated").text(o+" - "),n){case"10753":$(".estimate-header .red").text(s);break;case"10752":$(".estimate-header .red").text(a);break;case"10751":$(".estimate-header .red").text(i);break;case"10755":$(".estimate-header .red").text(o);break;case"10754":$(".estimate-header .red").text("No Estimated Delivery on APO/FPO Orders")}}else $(".estimate-header .red").text("Not available at this time")}).fail(function(){$(".estimate-header .red").text("Not available at this time")})},setCountDown:function(){var e=new Date,t=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),22,0,0)),i=$(".ship-countdown"),s=Date.parse(t)/1e3,a=Math.floor(Date.now()/1e3),n=s-a,o=Math.floor(n/86400);n-=60*o*60*24;var p=Math.floor(n/3600);n-=60*p*60;var d=Math.floor(n/60);n-=60*d,1==o?i.find(".timeRefDays").text("day"):i.find(".timeRefDays").text("days"),1==p?i.find(".timeRefHours").text("hour"):i.find(".timeRefHours").text("hours"),1==d?i.find(".timeRefMinutes").text("minute"):i.find(".timeRefMinutes").text("minutes"),1==n?i.find(".timeRefSeconds").text("second"):i.find(".timeRefSeconds").text("seconds"),o>=1&&i.find(".time-hours").show(),o<1&&(i.find(".time-days").hide(),i.find(".time-hours").show(),i.find("br").hide()),o<1&&p<=1&&(i.find(".time-days").hide(),i.find(".time-hours").show(),i.find(".time-minutes").show()),o<1&&0==p&&(i.find(".time-days").hide(),i.find(".time-hours").hide(),i.find(".time-minutes").show()),isNaN(s)?i.hide():(i.find(".days").text(o),i.find(".hours").text(p),i.find(".minutes").text(d),i.find(".seconds").text(n))},getShippingText:function(e){var i="",s="",a=[{value:"10753",method:"2-Day Shipping",subtext:"<strong>FREE</strong> 2-Day Shipping",othertext:""},{value:"10751",method:"Standard Shipping",subtext:"<strong>FREE</strong> Standard Shipping",othertext:""},{value:"10752",method:"Next-Day Shipping",subtext:"<span class='ship-amount'>$17.95</span> Next-Day Shipping",othertext:""},{value:"10755",method:"USPS PO BOX",subtext:"<strong>FREE</strong> USPS PO BOX Only ",othertext:""},{value:"10754",method:"APO/FPO",subtext:"<strong>FREE</strong> APO/FPO ",othertext:"<a class='shipping-modal-details' data-open-modal='shipping_modal' data-scroll-modal='mail_transit'> <span>Click here</span> to see estimated shipping times.</a>"}];for(t=0;t<a.length;t++){var n=a[t],o=n.value,p=n.subtext,d=n.othertext;o==e&&(i=p,s=d)}return[i,s]},changeShipDropDown:function(){var e=$("#singleShipmentShippingMode option:selected").index(),t="Enter Zip Code Above",i=this;$("#singleShipmentShippingMode option").each(function(t,s){var a=($(this).text(),$(this).val()),n=i.getShippingText(a),o=n[0],p=n[1],d="redesignIcons-radio";e==t&&(d="redesignIcons-radio-checked"),$("<div/>").addClass("sgh-ship-radio custom-check val-"+a).prepend($('<label for="'+a+'"><span class="icon '+d+'"></span><span class="red ship-estimated"></span>'+o+"</label>").attr("value",a).attr("checked",t==e).prepend($('<input type="radio" name="shipping" id="'+a+'" />').click(function(){var e=$(this);e.prev().prop("checked");$("input:radio[name="+$(this).attr("name")+"]").parent().find(".icon.redesignIcons-radio-checked").removeClass("redesignIcons-radio-checked").addClass("redesignIcons-radio"),$(this).parent().find(".icon").removeClass("redesignIcons-radio").addClass("redesignIcons-radio-checked"),$("#singleShipmentShippingMode").val(a),$("#singleShipmentShippingMode").trigger("change"),i.loadAJAX()}))).append(p).appendTo(".shipping_method_content")});var s=$("#oneday_UPS").text();if(s.indexOf("FREE")!==-1&&$(".sgh-ship-radio.val-10752").find(".ship-amount").html("<strong>FREE</strong>"),$(".val-10754").insertAfter($(".val-10751")),$(".val-10755").insertAfter($(".val-10751")),$("<div/>").addClass("sgh-ship-estimate").prepend($("<p/>").addClass("estimate-header").html('Estimated Delivery: <span class="red">'+t+"</span>")).append($("<p/>").addClass("estimate-body").html('<span class="ship-count-container">If you order in the next <span class="ship-countdown"> <span class="hours time-hours"><!--00--></span> <span class="timeRefHours time-hours"><!--hours--></span> <span class="minutes time-minutes"><!--00--></span> <span class="timeRefMinutes time-minutes"><!--minutes--></span></span></span>  <a class="shipping-modal-details" data-open-modal="shipping_modal" >See Shipping Details</a>')).prependTo(".shipping_method_content"),$(".mapquest-lookup").change(function(){var e=$(".mapquest-lookup").val();i.loadAJAX(e)}),$(".mapquest-lookup").val()){var a=$(".mapquest-lookup").val();i.loadAJAX(a)}if($(".address-block").length){var a=$(".shipAddress:visible .pixel_zip").val();$("#singleShipmentAddress").change(function(){a=$(".shipAddress:visible .pixel_zip").val(),setTimeout(function(){i.loadAJAX(a)},300)}),i.loadAJAX(a)}$(".shipping-modal-details").on("click",function(){var e=$(this);openCustomModal(e)})},init:function(){return this.changeShipDropDown(),this}};window.narvarAPI=t}(),$(function(){$(".hto-copy:visible").length?$(".shipping_method_content").addClass("ship-hto"):($("body").addClass("exp-narvar-shipping"),narvarAPI.init())});